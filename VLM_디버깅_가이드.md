# VLM 설명 디버깅 가이드

## 브라우저 콘솔에서 VLM 설명 확인하는 방법

### 1. 브라우저 개발자 도구 열기

**Windows/Linux:**
- `F12` 키를 누르거나
- `Ctrl + Shift + I` (또는 `Ctrl + Shift + J`)

**Mac:**
- `Cmd + Option + I` (또는 `Cmd + Option + J`)

### 2. 콘솔 탭 선택

개발자 도구가 열리면 상단의 **"Console"** 탭을 클릭합니다.

### 3. 이미지 업로드 및 분석

웹 페이지에서 이미지를 업로드하고 분석을 실행합니다.

### 4. 콘솔에서 확인할 정보

콘솔에 다음과 같은 정보가 출력됩니다:

```
============================================================
🔍 VLM 설명 데이터 확인
============================================================
✅ VLM 설명 존재 여부: true/false
📊 VLM 설명 타입: string
📏 VLM 설명 길이: 123
📝 VLM 설명 내용 (처음 300자): ...
📝 VLM 설명 전체: ...
============================================================
✅ 포맷팅된 HTML (처음 500자): ...
✅ VLM 설명이 화면에 표시되었습니다.
```

### 5. 문제 해결

#### VLM 설명이 없는 경우
- 콘솔에 `❌ VLM 설명이 없거나 비어있습니다.` 메시지가 표시됩니다.
- `전체 응답 데이터`를 확인하여 서버에서 데이터가 제대로 전송되었는지 확인합니다.

#### VLM 설명이 있지만 화면에 표시되지 않는 경우
- `포맷팅된 HTML`을 확인하여 HTML 변환이 제대로 되었는지 확인합니다.
- 브라우저의 Elements 탭에서 `vlmExplanation` 요소를 찾아 내용을 확인합니다.

### 6. 네트워크 탭에서 확인

1. 개발자 도구에서 **"Network"** 탭을 선택합니다.
2. 이미지를 업로드하고 분석을 실행합니다.
3. `/predict` 요청을 찾아 클릭합니다.
4. **"Response"** 탭에서 서버 응답을 확인합니다.
5. `vlm_explanation` 필드가 있는지 확인합니다.

### 7. 서버 로그 확인

터미널에서 다음과 같은 로그를 확인할 수 있습니다:

```
VLM 설명 생성 중...
📸 이미지 분석 중... (크기: (896, 768))
📝 프롬프트 길이: 660 문자
✅ VLM 원본 응답 (길이: 149 문자)
📝 추출된 설명 (길이: 123): ...
✅ 최종 VLM 설명 (길이: 200): ...
✅ VLM 설명 생성 완료: ...
📤 응답 전송 - VLM 설명 길이: 200
📤 VLM 설명 미리보기: ...
```

### 8. 일반적인 문제와 해결 방법

#### 문제 1: VLM 설명이 null 또는 undefined
- **원인**: 서버에서 VLM 모델이 로드되지 않았거나 오류 발생
- **해결**: 서버 로그를 확인하여 VLM 모델 로드 상태 확인

#### 문제 2: VLM 설명이 영어로 나옴
- **원인**: 모델이 한국어를 지원하지 않거나 프롬프트가 제대로 전달되지 않음
- **해결**: 폴백 설명이 자동으로 사용됩니다.

#### 문제 3: VLM 설명이 너무 짧음
- **원인**: 모델이 제대로 응답하지 않음
- **해결**: 폴백 설명이 자동으로 사용됩니다.

### 9. 수동으로 확인하는 방법

콘솔에서 다음 명령어를 입력하여 직접 확인할 수 있습니다:

```javascript
// VLM 설명 요소 확인
document.getElementById('vlmExplanation')

// VLM 설명 내용 확인
document.getElementById('vlmExplanation').innerHTML

// VLM 설명 텍스트 확인
document.getElementById('vlmExplanation').textContent
```


